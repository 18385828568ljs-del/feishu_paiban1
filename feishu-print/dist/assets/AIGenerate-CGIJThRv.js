import{d as De,u as $e,o as Ve,p as ie,r as b,X as j,N as Ne,c as y,b as t,g as X,q as Fe,y as Ie,Y as ze,n as $,f as P,e as q,t as L,k as Y,i as je,l as Pe,E,w as K,m as Oe,F as Q,h as ee,P as ne,Z as qe,v as Re,j as k,_ as Ue}from"./index-mInWaxl3.js";import{t as Ze}from"./templates-DCFN9nDS.js";import{s as te}from"./sanitize-Cd_e7NsO.js";import"./purify.es-B9ZVCkUG.js";const Je={class:"ai-generate-page"},We={class:"workspace"},Xe={class:"left-panel"},Ye={class:"mode-toggle"},Ke={class:"category-tabs"},Qe=["onClick"],et=["innerHTML"],tt={class:"panel-section"},st={class:"section-header"},lt={class:"section-hint"},rt={class:"scene-grid"},ot=["onClick"],at=["innerHTML"],it={class:"scene-name"},nt={key:0,class:"panel-section"},dt={class:"section-header"},ct={class:"section-hint"},ht={class:"field-list"},ut=["value"],gt={class:"field-name"},ft={class:"panel-section flex-1"},vt={class:"input-wrapper"},pt=["disabled"],wt={class:"input-meta"},yt={class:"word-count"},kt={class:"action-bar"},xt={key:1,class:"progress-bar"},mt={class:"progress-track"},bt={class:"progress-text"},Mt={class:"preview-toolbar"},_t={class:"toolbar-actions"},At={class:"preview-canvas"},Gt={key:0,class:"empty-state"},Tt={key:1,class:"loading-state"},Ct={class:"loading-text"},Bt={key:0,class:"loading-desc"},Lt={key:2,class:"preview-document"},Et=["innerHTML"],Ht={key:0,class:"cursor-blink"},St=De({__name:"AIGenerate",setup(Dt){const se=je(),{initUser:de,checkAndUseFeature:ce,userStatus:he,refreshStatus:ue}=$e(),ge="https://zhinengpaiban.cn";Ve(async()=>{de(),await fe()});const fe=async()=>{try{const e=await(await ie.base.getActiveTable()).getFieldMetaList();T.value=e.filter(l=>l.name&&l.name.trim()!=="").map(l=>({name:l.name,id:l.id,type:l.type.toString()})),H.value=T.value.map(l=>l.id)}catch(s){console.warn("获取字段列表失败:",s)}},S=b(""),p=b(""),U=b(""),x=b(!1),V=b(0),Z=b(""),O=b("all"),I=b("traditional"),z=b(null),N=b(!0),G=b(""),D=b(0),ve=b(!1),T=b([]),H=b([]),pe=b(null),le=j(()=>{let s=p.value;s=s.replace(/```html/g,"").replace(/```/g,"");const e=s.indexOf("<");return e>0&&(s=s.slice(e)),s}),J=j(()=>x.value?le.value:U.value||le.value),we=j(()=>{if(!ve.value||!pe.value){let s=J.value;try{const l=new DOMParser().parseFromString(s,"text/html");l.querySelectorAll(".template-field.field-block").forEach(M=>{const h=M}),s=l.body.innerHTML}catch{}return s}return He(J.value)}),ye=s=>{let e=s;e=e.replace(/```html/g,"").replace(/```/g,"");const l=e.indexOf("<");l>0&&(e=e.slice(l));const C=e.lastIndexOf("<"),M=e.lastIndexOf(">");if(C>M){const o=e.substring(C);!o.includes(">")&&o.length<100&&(e=e.substring(0,C))}const h=e.match(/<div\s+([^>]*id\s*=\s*["']template-root["'][^>]*)>/i)||e.match(/^<div\s+([^>]*)>/i);if(h){const o=h[1],c=h[0],u=o.search(/style\s*=\s*/i);if(u>=0){let r=u;for(;r<o.length&&o[r]!=="=";)r++;for(r++;r<o.length&&/\s/.test(o[r]);)r++;if(r<o.length&&(o[r]==='"'||o[r]==="'")){const a=o[r];r++;const m=r;let g=-1;for(;r<o.length;){if(o[r]===a&&(r===0||o[r-1]!=="\\")){g=r;break}r++}if(g>m){let i=o.substring(m,g).replace(/height\s*:\s*100%\s*;?/gi,"");i=i.replace(/;\s*;/g,";").replace(/^\s*;\s*|\s*;\s*$/g,"");const f=o.substring(0,u),v=o.substring(g+1),_=f+`style=${a}${i}${a}`+v,A=c.replace(o,_);e=e.replace(c,A)}}}}if(e=e.trim(),!e.includes("<")||!e.includes(">"))return"";const F=e.match(/^<div\s+([^>]*)>/i);if(F){const o=F[1],c=F[0];if(o.includes("style=")){const u=o.match(/style\s*=\s*(["'])((?:(?=(\\?))\3.)*?)\1/i);if(u){const r=u[1];let a=u[2];a=a.replace(/height\s*:\s*100%\s*;?/gi,""),a=a.replace(/;\s*;/g,";").replace(/^\s*;\s*|\s*;\s*$/g,""),a.includes("max-height")||(a+="; max-height: 277mm"),a.includes("overflow")||(a+="; overflow: hidden"),a.includes("box-sizing")||(a+="; box-sizing: border-box");const m=o.replace(/style\s*=\s*(["'])((?:(?=(\\?))\3.)*?)\1/i,`style=${r}${a}${r}`),g=c.replace(o,m);e=e.replace(c,g)}}else e=e.replace(/^<div\s+([^>]*)>/i,'<div $1 style="max-height: 277mm; overflow: hidden; box-sizing: border-box;">')}try{const c=new DOMParser().parseFromString(e,"text/html"),u=n=>{if(n.nodeType===1){const i=n,f=i.getAttribute("style");f&&!i.hasAttribute("data-preserved-style")&&i.setAttribute("data-preserved-style",f),Array.from(i.children).forEach(u)}},r=n=>{if(n.nodeType===3){const i=n.textContent||"",f=n.parentNode,v=f&&f.classList&&f.classList.contains("template-field");if(/\{\$[^}]+\}/.test(i)&&!v){const _=c.createDocumentFragment();let A=0;const w=/\{\$([^}]+)\}/g;let d;for(;(d=w.exec(i))!==null;){d.index>A&&_.appendChild(c.createTextNode(i.substring(A,d.index)));const B=c.createElement("span");B.className="template-field field-block";const W=d[1].trim();B.setAttribute("data-fieldname",W);const R=T.value.find(Se=>Se.name===W);R&&B.setAttribute("data-fieldid",R.id),B.setAttribute("style","display: inline;"),B.textContent=d[0],_.appendChild(B),A=d.index+d[0].length}A<i.length&&_.appendChild(c.createTextNode(i.substring(A))),n.parentNode&&n.parentNode.replaceChild(_,n)}}else n.nodeType===1&&(!n.classList||!n.classList.contains("template-field"))&&Array.from(n.childNodes).forEach(r)},a=c.querySelectorAll("style");let m="";a.forEach(n=>{m+=n.outerHTML});const g=c.body||c.documentElement;g&&(Array.from(g.querySelectorAll("*")).forEach(u),Array.from(g.childNodes).forEach(r),g.querySelectorAll("*").forEach(f=>{const v=f,_=v.getAttribute("data-preserved-style");if(_){const w=v.getAttribute("style")||"";if(w&&w!==_){const d=_+(w?"; "+w:"");v.setAttribute("style",d)}else w||v.setAttribute("style",_);v.removeAttribute("data-preserved-style")}const A=v.tagName.toLowerCase();if(["table","tr","td","th"].includes(A)){const w=v.getAttribute("border"),d=v.getAttribute("cellpadding"),B=v.getAttribute("cellspacing")}}),e=m+g.innerHTML)}catch{e=e.replace(/\{\$([^}]+)\}/g,(c,u)=>{const r=u.trim(),a=T.value.find(g=>g.name===r),m=a?` data-fieldid="${a.id}"`:"";return`<span class="template-field field-block" data-fieldname="${r}"${m}>${c}</span>`})}try{const c=new DOMParser().parseFromString(e,"text/html"),u=c.querySelectorAll(".template-field");u.forEach(r=>{const a=r,m=a.getAttribute("data-fieldname");if(m&&!a.getAttribute("data-fieldid")){const i=T.value.find(f=>f.name===m);i&&a.setAttribute("data-fieldid",i.id)}const n=(a.getAttribute("style")||"").replace(/background-color\s*:\s*#e0e9ff[^;]*;?/gi,"").replace(/box-shadow\s*:[^;]*;?/gi,"").trim();n?a.setAttribute("style",n):a.removeAttribute("style")}),u.length>0&&(e=c.body.innerHTML)}catch{}return e.trim()},ke=[{id:"all",label:"全部",icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M4 4h6v6H4zM14 4h6v6h-6zM4 14h6v6H4zM14 14h6v6h-6z" fill="currentColor"/></svg>'},{id:"form",label:"日常表单",icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><path d="M16 13H8"/><path d="M16 17H8"/><path d="M10 9H8"/></svg>'},{id:"admin",label:"行政人事",icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="8.5" cy="7" r="4"/><line x1="20" y1="8" x2="20" y2="14"/><line x1="23" y1="11" x2="17" y2="11"/></svg>'},{id:"finance",label:"财务单据",icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>'}],xe=j(()=>ke),me=[{label:"入职申请表",category:"admin",value:"员工入职申请表，包含姓名、身份证号、部门、职位、入职日期、学历、联系方式、紧急联系人等字段，底部有员工签名和HR审批区域"},{label:"请假申请",category:"admin",value:"请假申请单，包含申请人、部门、请假类型、开始结束日期、请假天数、请假事由、部门主管和HR审批签字"},{label:"办公用品领用",category:"admin",value:"办公用品领用登记表，包含领用日期、部门、领用人、物品名称、规格、数量、用途、管理员签字"},{label:"报销单",category:"finance",value:"费用报销单，包含报销人、部门、报销日期、费用明细表（项目、金额、发票号）、合计金额、审批流程签字区"},{label:"工资条",category:"finance",value:"员工工资条，包含员工姓名、工号、部门、基本工资、绩效、补贴、扣款明细、实发工资、发放日期"},{label:"出库单",category:"form",value:"仓库出库单，包含出库日期、单号、领用部门、物品明细表（名称、规格、数量、单价、金额）、经办人、审批人签字"},{label:"采购合同",category:"form",value:"采购合同，包含甲乙双方信息、采购物品明细表、金额、付款方式、交货日期、违约责任、双方签章区域"},{label:"会议签到表",category:"admin",value:"会议签到表，包含会议主题、时间、地点、主持人、参会人员列表（序号、姓名、部门、签到时间、备注）"},{label:"工作证明",category:"admin",value:"在职证明/工作证明，包含员工姓名、身份证号、部门、职位、入职日期、工作年限、月薪范围（可选）、公司盖章区、开具日期"},{label:"离职证明",category:"admin",value:"离职证明，包含员工姓名、身份证号、部门、职位、入职日期、离职日期、离职原因、公司盖章区"},{label:"入库单",category:"form",value:"仓库入库单，包含入库日期、单号、供应商、物品明细表（名称、规格、数量、单价、金额）、验收人、仓管员签字"},{label:"借款申请",category:"finance",value:"借款申请单，包含申请人、部门、借款金额、借款事由、预计还款日期、审批流程签字区"},{label:"加班申请",category:"admin",value:"加班申请单，包含申请人、部门、加班日期、加班时长、加班事由、部门主管审批签字"},{label:"设备领用",category:"form",value:"设备领用登记表，包含领用日期、领用人、部门、设备名称、设备编号、规格型号、数量、用途、归还日期、管理员签字"},{label:"合同签收单",category:"form",value:"合同签收确认单，包含合同编号、合同名称、甲乙双方、签收人、签收日期、合同份数、备注"},{label:"培训签到表",category:"admin",value:"培训签到表，包含培训主题、培训时间、培训地点、讲师、参训人员列表（序号、姓名、部门、签到时间）"}],re=j(()=>me);Ne(I,()=>{O.value="all",Z.value=""});const oe=j(()=>O.value==="all"?re.value:re.value.filter(s=>s.category===O.value)),be=s=>{Z.value=s.label,S.value=s.value},Me=()=>{H.value=T.value.map(s=>s.id)},_e=()=>{H.value=[]},Ae=()=>T.value.filter(s=>H.value.includes(s.id)),Ge=()=>{se.push("/")},Te=s=>{const e={入职申请表:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#6366f1"/><stop offset="100%" style="stop-color:#a855f7"/></linearGradient></defs>
      <rect x="4" y="2" width="16" height="20" rx="2" stroke="url(#grad1)" stroke-width="1.5" fill="none"/>
      <path d="M8 7h8M8 11h8M8 15h5" stroke="url(#grad1)" stroke-width="1.5" stroke-linecap="round"/>
      <circle cx="17" cy="17" r="3" fill="url(#grad1)"/><path d="M16 17h2M17 16v2" stroke="white" stroke-width="1.2" stroke-linecap="round"/>
    </svg>`,采购合同:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#f59e0b"/><stop offset="100%" style="stop-color:#ef4444"/></linearGradient></defs>
      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="url(#grad2)" stroke-width="1.5" fill="none"/>
      <path d="M14 2v6h6" stroke="url(#grad2)" stroke-width="1.5" stroke-linecap="round"/>
      <path d="M8 13h8M8 17h6" stroke="url(#grad2)" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,报销单:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad3" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#10b981"/><stop offset="100%" style="stop-color:#06b6d4"/></linearGradient></defs>
      <rect x="3" y="4" width="18" height="16" rx="2" stroke="url(#grad3)" stroke-width="1.5" fill="none"/>
      <circle cx="12" cy="12" r="4" stroke="url(#grad3)" stroke-width="1.5" fill="none"/>
      <path d="M12 10v4M10.5 11.5l1.5 1 1.5-1" stroke="url(#grad3)" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`,请假申请:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad4" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#3b82f6"/><stop offset="100%" style="stop-color:#8b5cf6"/></linearGradient></defs>
      <rect x="3" y="4" width="18" height="18" rx="2" stroke="url(#grad4)" stroke-width="1.5" fill="none"/>
      <path d="M3 10h18" stroke="url(#grad4)" stroke-width="1.5"/>
      <path d="M8 2v4M16 2v4" stroke="url(#grad4)" stroke-width="1.5" stroke-linecap="round"/>
      <circle cx="12" cy="15" r="2" fill="url(#grad4)"/>
    </svg>`,工资条:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad5" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#22c55e"/><stop offset="100%" style="stop-color:#16a34a"/></linearGradient></defs>
      <rect x="2" y="6" width="20" height="12" rx="2" stroke="url(#grad5)" stroke-width="1.5" fill="none"/>
      <circle cx="12" cy="12" r="3" stroke="url(#grad5)" stroke-width="1.5" fill="none"/>
      <path d="M6 9v6M18 9v6" stroke="url(#grad5)" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,出库单:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad6" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#f97316"/><stop offset="100%" style="stop-color:#eab308"/></linearGradient></defs>
      <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" stroke="url(#grad6)" stroke-width="1.5" fill="none"/>
      <path d="M3.27 6.96L12 12.01l8.73-5.05M12 22.08V12" stroke="url(#grad6)" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,会议纪要:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad7" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#8b5cf6"/><stop offset="100%" style="stop-color:#d946ef"/></linearGradient></defs>
      <rect x="3" y="3" width="18" height="18" rx="2" stroke="url(#grad7)" stroke-width="1.5" fill="none"/>
      <path d="M7 8h10M7 12h10M7 16h7" stroke="url(#grad7)" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,保密协议:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad8" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#64748b"/><stop offset="100%" style="stop-color:#475569"/></linearGradient></defs>
      <rect x="5" y="11" width="14" height="10" rx="2" stroke="url(#grad8)" stroke-width="1.5" fill="none"/>
      <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="url(#grad8)" stroke-width="1.5" stroke-linecap="round"/>
      <circle cx="12" cy="16" r="1.5" fill="url(#grad8)"/>
    </svg>`,劳动合同:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad9" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#0ea5e9"/><stop offset="100%" style="stop-color:#6366f1"/></linearGradient></defs>
      <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" stroke="url(#grad9)" stroke-width="1.5" fill="none"/>
      <rect x="8" y="2" width="8" height="4" rx="1" stroke="url(#grad9)" stroke-width="1.5" fill="none"/>
      <path d="M9 12h6M9 16h4" stroke="url(#grad9)" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,租赁协议:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad10" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#14b8a6"/><stop offset="100%" style="stop-color:#0d9488"/></linearGradient></defs>
      <path d="M3 21h18M5 21V7l7-4 7 4v14" stroke="url(#grad10)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
      <rect x="9" y="13" width="6" height="8" stroke="url(#grad10)" stroke-width="1.5" fill="none"/>
      <path d="M9 9h6" stroke="url(#grad10)" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,周报:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad11" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#06b6d4"/><stop offset="100%" style="stop-color:#3b82f6"/></linearGradient></defs>
      <rect x="3" y="4" width="18" height="18" rx="2" stroke="url(#grad11)" stroke-width="1.5" fill="none"/>
      <path d="M3 10h18M9 4v6" stroke="url(#grad11)" stroke-width="1.5"/>
      <circle cx="7" cy="14" r="1" fill="url(#grad11)"/><circle cx="12" cy="14" r="1" fill="url(#grad11)"/><circle cx="17" cy="14" r="1" fill="url(#grad11)"/>
      <circle cx="7" cy="18" r="1" fill="url(#grad11)"/><circle cx="12" cy="18" r="1" fill="url(#grad11)"/>
    </svg>`,项目报告:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad12" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#f43f5e"/><stop offset="100%" style="stop-color:#e11d48"/></linearGradient></defs>
      <rect x="3" y="3" width="18" height="18" rx="2" stroke="url(#grad12)" stroke-width="1.5" fill="none"/>
      <path d="M12 8v8M8 12v4M16 6v10" stroke="url(#grad12)" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,数据分析:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad13" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#8b5cf6"/><stop offset="100%" style="stop-color:#6366f1"/></linearGradient></defs>
      <circle cx="12" cy="12" r="9" stroke="url(#grad13)" stroke-width="1.5" fill="none"/>
      <path d="M12 12L16 8M12 12V6" stroke="url(#grad13)" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,活动邀请:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad14" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#ec4899"/><stop offset="100%" style="stop-color:#f472b6"/></linearGradient></defs>
      <rect x="3" y="5" width="18" height="16" rx="2" stroke="url(#grad14)" stroke-width="1.5" fill="none"/>
      <path d="M3 9h18" stroke="url(#grad14)" stroke-width="1.5"/>
      <path d="M8 3v4M16 3v4" stroke="url(#grad14)" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,产品介绍:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad15" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#f59e0b"/><stop offset="100%" style="stop-color:#d97706"/></linearGradient></defs>
      <path d="M12 3l8 4.5v9L12 21l-8-4.5v-9L12 3z" stroke="url(#grad15)" stroke-width="1.5" fill="none"/>
      <path d="M12 12l8-4.5M12 12v9M12 12L4 7.5" stroke="url(#grad15)" stroke-width="1.5" stroke-linecap="round"/>
    </svg>`,公司简介:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad16" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#3b82f6"/><stop offset="100%" style="stop-color:#2563eb"/></linearGradient></defs>
      <rect x="4" y="4" width="16" height="16" rx="2" stroke="url(#grad16)" stroke-width="1.5" fill="none"/>
      <path d="M9 21v-6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v6" stroke="url(#grad16)" stroke-width="1.5"/>
      <path d="M9 10h.01M15 10h.01M9 14h.01M15 14h.01" stroke="url(#grad16)" stroke-width="2" stroke-linecap="round"/>
    </svg>`,证书奖状:`<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <defs><linearGradient id="grad17" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#fcd34d"/><stop offset="100%" style="stop-color:#fbbf24"/></linearGradient></defs>
      <rect x="4" y="3" width="16" height="18" rx="2" stroke="url(#grad17)" stroke-width="1.5" fill="none"/>
      <circle cx="12" cy="9" r="3" stroke="url(#grad17)" stroke-width="1.5"/>
      <path d="M12 14l-2 5 2-1 2 1-2-5" fill="url(#grad17)" stroke="none"/>
    </svg>`,办公用品领用:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="grad_office" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#6366f1"/><stop offset="100%" style="stop-color:#8b5cf6"/></linearGradient></defs><rect x="3" y="3" width="18" height="18" rx="2" stroke="url(#grad_office)" stroke-width="1.5" fill="none"/><path d="M9 3v18M15 3v18M3 9h18M3 15h18" stroke="url(#grad_office)" stroke-width="1.5" opacity="0.5"/></svg>',会议签到表:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="grad_sign" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#10b981"/><stop offset="100%" style="stop-color:#34d399"/></linearGradient></defs><rect x="4" y="4" width="16" height="16" rx="2" stroke="url(#grad_sign)" stroke-width="1.5"/><path d="M9 12l2 2 4-4" stroke="url(#grad_sign)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',工作证明:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="grad_cert" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#0ea5e9"/><stop offset="100%" style="stop-color:#0284c7"/></linearGradient></defs><rect x="4" y="3" width="16" height="18" rx="2" stroke="url(#grad_cert)" stroke-width="1.5" fill="none"/><circle cx="12" cy="9" r="3" stroke="url(#grad_cert)" stroke-width="1.5"/><path d="M8 16h8M9 19h6" stroke="url(#grad_cert)" stroke-width="1.5" stroke-linecap="round"/></svg>',离职证明:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="grad_leave" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#64748b"/><stop offset="100%" style="stop-color:#475569"/></linearGradient></defs><rect x="4" y="3" width="16" height="18" rx="2" stroke="url(#grad_leave)" stroke-width="1.5" fill="none"/><path d="M9 9h6M9 13h6M9 17h4" stroke="url(#grad_leave)" stroke-width="1.5" stroke-linecap="round"/><path d="M15 17l2 2 2-2" stroke="url(#grad_leave)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',入库单:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="grad_in" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#22c55e"/><stop offset="100%" style="stop-color:#16a34a"/></linearGradient></defs><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" stroke="url(#grad_in)" stroke-width="1.5" fill="none"/><path d="M12 12v6M9 15l3 3 3-3" stroke="url(#grad_in)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',借款申请:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="grad_loan" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#f59e0b"/><stop offset="100%" style="stop-color:#d97706"/></linearGradient></defs><circle cx="12" cy="12" r="9" stroke="url(#grad_loan)" stroke-width="1.5" fill="none"/><path d="M12 7v10M9 9.5c0-1.5 1.5-2.5 3-2.5s3 1 3 2.5-1.5 2-3 2.5c-1.5.5-3 1-3 2.5s1.5 2.5 3 2.5 3-1 3-2.5" stroke="url(#grad_loan)" stroke-width="1.5" stroke-linecap="round"/></svg>',加班申请:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="grad_ot" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#ec4899"/><stop offset="100%" style="stop-color:#be185d"/></linearGradient></defs><circle cx="12" cy="12" r="9" stroke="url(#grad_ot)" stroke-width="1.5" fill="none"/><path d="M12 7v5l3 3" stroke="url(#grad_ot)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M17 3l2 2M7 3L5 5" stroke="url(#grad_ot)" stroke-width="1.5" stroke-linecap="round"/></svg>',设备领用:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="grad_device" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#8b5cf6"/><stop offset="100%" style="stop-color:#7c3aed"/></linearGradient></defs><rect x="2" y="3" width="20" height="14" rx="2" stroke="url(#grad_device)" stroke-width="1.5" fill="none"/><path d="M8 21h8M12 17v4" stroke="url(#grad_device)" stroke-width="1.5" stroke-linecap="round"/></svg>',合同签收单:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="grad_contract" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#14b8a6"/><stop offset="100%" style="stop-color:#0d9488"/></linearGradient></defs><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="url(#grad_contract)" stroke-width="1.5" fill="none"/><path d="M14 2v6h6" stroke="url(#grad_contract)" stroke-width="1.5"/><path d="M9 15l2 2 4-4" stroke="url(#grad_contract)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',培训签到表:'<svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="grad_train" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#06b6d4"/><stop offset="100%" style="stop-color:#0891b2"/></linearGradient></defs><path d="M22 10v6M2 10l10-5 10 5-10 5z" stroke="url(#grad_train)" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 12v5c0 2 3 3 6 3s6-1 6-3v-5" stroke="url(#grad_train)" stroke-width="1.5" fill="none"/></svg>'};return s==="项目周报"?e.周报:s==="活动邀请函"?e.活动邀请:s==="荣誉证书"?e.证书奖状:e[s]||e.入职申请表},Ce=()=>["","分析需求中...","设计布局中...","生成代码中...","完成"][V.value]||"",ae=async()=>{var l,C;if(!S.value.trim()){E.warning("请输入模板描述");return}if(T.value.length>0&&H.value.length===0){E.warning("请至少选择一个字段");return}if(!await ce("ai_generate"))return;N.value=!1,x.value=!0,p.value="",U.value="",V.value=1,G.value="正在连接AI服务...",D.value=0,z.value=new AbortController;const e=setTimeout(()=>{var M;x.value&&((M=z.value)==null||M.abort(),E.error("生成超时，请稍后重试。如果问题持续，请尝试简化需求描述。"),x.value=!1)},4e5);try{try{const f=await(await ie.base.getActiveTable()).getFieldMetaList();T.value=f.filter(v=>v.name&&v.name.trim()!=="").map(v=>({name:v.name,id:v.id,type:v.type.toString()}))}catch{}const M=Ae();setTimeout(()=>{x.value&&(V.value=2)},800),setTimeout(()=>{x.value&&(V.value=3)},1500),G.value="正在发送请求...";const h=await fetch(`${ge}/api/ai/generate-template-stream`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:S.value,mode:I.value,availableFields:M,feishu_user_id:((l=he.value)==null?void 0:l.feishu_user_id)||""}),signal:z.value.signal});if(!h.ok){let i=`HTTP error! status: ${h.status}`;try{const f=await h.json();f.detail&&(i=f.detail)}catch{}throw new Error(i)}G.value="已连接，等待AI响应...";const F=(C=h.body)==null?void 0:C.getReader(),o=new TextDecoder;if(!F)throw new Error("无法获取响应流");let c="",u=Date.now(),r=Date.now();const a=12e4;let m=!1,g=!1;const n=setInterval(()=>{const i=Date.now()-u,f=Date.now()-r;i>a&&f>a&&!m&&(m=!0,F.cancel(),clearInterval(n))},5e3);try{for(;;){if(m)throw new Error("数据接收超时，连接可能已中断");const{done:i,value:f}=await F.read();if(i){if(c){const A=c.split(`
`);for(const w of A)if(w.startsWith("data: ")&&w.slice(6)==="[DONE]"){g=!0;break}}if(!g)if(p.value&&p.value.trim().length>=1e3)g=!0;else throw new Error("连接中断，生成可能不完整。请重试。");break}u=Date.now();const v=o.decode(f,{stream:!0});c+=v;const _=c.split(`
`);c=_.pop()||"";for(const A of _)if(A.startsWith("data: ")){const w=A.slice(6);if(w==="[DONE]"){if(g=!0,clearInterval(n),!p.value||p.value.trim().length<200)throw new Error("生成的模板内容过短或不完整，请重试");if(!p.value.includes("<div")&&!p.value.includes("<DIV"))throw new Error("生成的模板缺少必需的HTML结构，请重试");const d=p.value.replace(/<[^>]+>/g,"").trim(),B=/\{\$[^}]+\}/.test(p.value);if(d.length<50&&!B)throw new Error("生成的模板内容过少，请重试或调整描述");V.value=4;break}try{const d=JSON.parse(w);if(d.type==="heartbeat"){r=Date.now(),u=Date.now(),G.value=d.message||"正在生成模板...";continue}if(d.type==="retry"){r=Date.now(),u=Date.now(),G.value=d.message||"正在重试生成...",E.info(d.message||"连接中断，正在自动重试...");continue}if(d.content){u=Date.now(),r=Date.now();const B=d.content;D.value+=B.length;const R=Math.min(95,Math.floor(D.value/2500*100));G.value=`正在生成... (${R}%, 已接收 ${D.value} 字符)`,p.value+=B}if(d.error)throw clearInterval(n),G.value=`生成失败: ${d.error}`,new Error(d.error)}catch{w&&w!=="[DONE]"&&(u=Date.now(),D.value+=w.length,G.value=`正在生成... (已接收 ${D.value} 字符)`,p.value+=w)}}}}finally{clearInterval(n)}if(!g)if(p.value&&p.value.trim().length>=1e3)g=!0;else throw new Error("生成未完成，请重试");G.value="正在清理和优化模板...",await new Promise(i=>setTimeout(i,0)),U.value=ye(p.value),G.value="生成完成！",V.value=4,x.value=!1,clearTimeout(e),E.success("模板生成完成！")}catch(M){if(clearTimeout(e),console.error("生成过程出错:",M),G.value=`生成失败: ${M.message||"未知错误"}`,x.value=!1,M.name==="AbortError")E.info("已停止生成");else{console.error("生成失败:",M);let h=M.message||"未知错误";if(h.includes("timeout")||h.includes("超时")||h.includes("数据接收超时"))h="生成超时，请稍后重试。如果问题持续，请尝试简化需求描述。";else if(h.includes("fetch")||h.includes("network"))h="网络连接失败，请检查网络连接后重试。";else if(h.includes("aborted")||h.includes("canceled")){h="请求已取消",E.info(h);return}E.error("生成失败: "+h)}}finally{x.value=!1,z.value=null,ue()}},Be=()=>{z.value&&z.value.abort()},Le=()=>{ae()},Ee=async()=>{try{const{value:s}=await Pe.prompt("请输入模板名称","保存模板",{confirmButtonText:"保存",cancelButtonText:"取消",inputValue:"",inputPlaceholder:"例如：员工入职申请表",inputValidator:e=>!e||e.trim().length===0?"请输入模板名称":!0});await Ze.create({name:s,content:J.value,template_type:"ai"}),E.success("模板已保存到模板库"),se.push({path:"/templates",query:{category:"ai"}}),setTimeout(()=>{E.info({message:'已自动切换到"AI模版"分类，您可以在这里找到刚才保存的模板',duration:5e3,showClose:!0})},500)}catch(s){if(s!=="cancel"){console.error("保存失败:",s);let e="保存失败";s.response&&s.response.data&&s.response.data.detail?e=s.response.data.detail:s.message&&(e=s.message),E.error(e)}}},He=s=>s;return(s,e)=>(k(),y("div",Je,[t("nav",{class:"top-nav"},[t("button",{onClick:Ge,class:"nav-back"},e[6]||(e[6]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"m15 18-6-6 6-6"})],-1)])),e[7]||(e[7]=X('<div class="nav-title" data-v-ceeaed01><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-ceeaed01><path d="M12 8V4H8" data-v-ceeaed01></path><rect width="16" height="12" x="4" y="8" rx="2" data-v-ceeaed01></rect><path d="M2 14h2" data-v-ceeaed01></path><path d="M20 14h2" data-v-ceeaed01></path><path d="M15 13v2" data-v-ceeaed01></path><path d="M9 13v2" data-v-ceeaed01></path></svg><span data-v-ceeaed01>智能模板工坊</span></div>',1))]),t("div",We,[Fe(ze,{name:"slide-fade"},{default:Ie(()=>[K(t("aside",Xe,[e[15]||(e[15]=t("div",{class:"panel-header"},[t("div",{class:"panel-title"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),t("circle",{cx:"12",cy:"12",r:"3"})]),t("span",null,"配置")])],-1)),t("div",Ye,[t("button",{onClick:e[0]||(e[0]=l=>I.value="traditional"),class:$(["mode-btn",{active:I.value==="traditional"}])},e[8]||(e[8]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),t("line",{x1:"9",y1:"21",x2:"9",y2:"9"})],-1),q(" 传统 ")]),2),t("button",{onClick:e[1]||(e[1]=l=>I.value="design"),class:$(["mode-btn",{active:I.value==="design"}])},e[9]||(e[9]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),t("path",{d:"M2 17l10 5 10-5"}),t("path",{d:"M2 12l10 5 10-5"})],-1),q(" 现代 ")]),2)]),t("div",Ke,[(k(!0),y(Q,null,ee(xe.value,l=>(k(),y("button",{key:l.id,onClick:C=>O.value=l.id,class:$(["category-tab",{active:O.value===l.id}])},[t("span",{class:"cat-icon",innerHTML:Y(te)(l.icon)},null,8,et),t("span",null,L(l.label),1)],10,Qe))),128))]),t("div",tt,[t("div",st,[e[10]||(e[10]=t("span",{class:"section-label"},"选择场景",-1)),t("span",lt,L(oe.value.length)+" 个模板",1)]),t("div",rt,[(k(!0),y(Q,null,ee(oe.value,(l,C)=>(k(),y("button",{key:l.label,onClick:M=>be(l),class:$(["scene-card",{active:Z.value===l.label}]),style:ne({animationDelay:`${C*30}ms`})},[t("span",{class:"scene-icon",innerHTML:Y(te)(Te(l.label))},null,8,at),t("span",it,L(l.label),1)],14,ot))),128))])]),T.value.length>0?(k(),y("div",nt,[t("div",dt,[e[11]||(e[11]=t("span",{class:"section-label"},"选择字段",-1)),t("span",ct,L(H.value.length)+"/"+L(T.value.length)+" 已选",1)]),t("div",{class:"field-select-actions"},[t("button",{onClick:Me,class:"field-action-btn"},"全选"),t("button",{onClick:_e,class:"field-action-btn"},"清空")]),t("div",ht,[(k(!0),y(Q,null,ee(T.value,l=>(k(),y("label",{key:l.id,class:$(["field-item",{selected:H.value.includes(l.id)}])},[K(t("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[2]||(e[2]=C=>H.value=C),class:"field-checkbox"},null,8,ut),[[qe,H.value]]),t("span",gt,L(l.name),1)],2))),128))])])):P("",!0),t("div",ft,[e[12]||(e[12]=t("div",{class:"section-header"},[t("span",{class:"section-label"},"描述需求")],-1)),t("div",vt,[K(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=l=>S.value=l),placeholder:`描述你想要的模板，例如：

• 需要哪些字段
• 表格的结构
• 签名区域位置
• 特殊格式要求`,class:"desc-textarea",disabled:x.value},null,8,pt),[[Re,S.value]]),t("div",wt,[t("span",yt,L(S.value.length)+"/500",1)])])]),t("div",kt,[x.value?(k(),y("button",{key:0,onClick:Be,class:"action-btn stop-btn"},e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})],-1),q(" 停止 ")]))):(k(),y("div",{key:1,onClick:e[4]||(e[4]=l=>S.value.trim()?ae():null),class:$(["ai-generate-btn-wrapper",{disabled:!S.value.trim()}])},e[14]||(e[14]=[t("div",{class:"glow-shadow"},null,-1),t("div",{class:"ai-generate-btn-content"},[t("svg",{class:"ai-generate-icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12 2L14.4 9.6L22 12L14.4 14.4L12 22L9.6 14.4L2 12L9.6 9.6L12 2Z"})]),t("span",{class:"btn-text"},"生成模板")],-1)]),2))]),x.value?(k(),y("div",xt,[t("div",mt,[t("div",{class:"progress-fill",style:ne({width:V.value/4*100+"%"})},null,4)]),t("span",bt,L(Ce()),1)])):P("",!0)],512),[[Oe,N.value]])]),_:1}),t("main",{class:$(["preview-area",{"full-width":!N.value}])},[t("div",Mt,[e[19]||(e[19]=t("div",{class:"toolbar-title"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),t("circle",{cx:"12",cy:"12",r:"3"})]),t("span",null,"预览")],-1)),t("div",_t,[t("button",{onClick:e[5]||(e[5]=l=>N.value=!N.value),class:$(["tool-btn",{active:N.value}])},[e[16]||(e[16]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),t("line",{x1:"9",y1:"3",x2:"9",y2:"21"})],-1)),q(" "+L(N.value?"隐藏配置":"显示配置"),1)],2),p.value&&!x.value?(k(),y("button",{key:0,onClick:Le,class:"tool-btn"},e[17]||(e[17]=[X('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-ceeaed01><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" data-v-ceeaed01></path><path d="M21 3v5h-5" data-v-ceeaed01></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" data-v-ceeaed01></path><path d="M8 16H3v5" data-v-ceeaed01></path></svg> 重新生成 ',2)]))):P("",!0),p.value&&!x.value?(k(),y("button",{key:1,onClick:Ee,class:"tool-btn primary"},e[18]||(e[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),t("path",{d:"M17 21v-8H7v8"}),t("path",{d:"M7 3v5h8"})],-1),q(" 保存使用 ")]))):P("",!0)])]),t("div",At,[!p.value&&!x.value?(k(),y("div",Gt,e[20]||(e[20]=[X('<div class="empty-icon" data-v-ceeaed01><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-ceeaed01><rect width="18" height="18" x="3" y="3" rx="2" ry="2" data-v-ceeaed01></rect><line x1="3" x2="21" y1="9" y2="9" data-v-ceeaed01></line><line x1="9" x2="9" y1="21" y2="9" data-v-ceeaed01></line></svg></div><h3 class="empty-title" data-v-ceeaed01>开始创建模板</h3><p class="empty-desc" data-v-ceeaed01>选择场景或输入描述，点击生成按钮</p>',3)]))):x.value&&!p.value?(k(),y("div",Tt,[e[21]||(e[21]=t("div",{class:"loading-animation"},[t("div",{class:"loading-dot"}),t("div",{class:"loading-dot"}),t("div",{class:"loading-dot"})],-1)),t("p",Ct,L(G.value||"正在生成模板..."),1),D.value>0?(k(),y("p",Bt,"已接收 "+L(D.value)+" 字符",1)):P("",!0)])):(k(),y("div",Lt,[t("div",{class:"a4-container",innerHTML:Y(te)(we.value)},null,8,Et),x.value?(k(),y("span",Ht,"|")):P("",!0)]))])],2)])]))}}),It=Ue(St,[["__scopeId","data-v-ceeaed01"]]);export{It as default};
